{% capture html %}
<ul class="nav">
    {%- assign entries = site.html_pages | sort: "position" -%}
    {% for entry in entries %}
      {%- capture slug    -%}{{ entry.url | split: "/"   | last                       }}{%- endcapture -%}
      {%- capture current -%}{{ entry.url | remove: slug | remove: "//" | append: "/" }}{%- endcapture -%}
      {% if entry.url == "/" and include.context == "/" %}
        <li class="{% if page.url == "/" %}active{% endif %}">
          <a class="main-link" href="{{ site.baseurl }}/">Introdução</a>
          {% if entry.anchors %}
            <ul class="anchors">
              {% for anchor in entry.anchors %}
                <li><a href="#{{anchor}}">{{anchor}}</a></li>
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endif %}
      {% if current == include.context %}
        <li class="{% if page.url == entry.url %}active{% endif %}">
          <a class="main-link {% if page.url == entry.url %}active{% endif %}" href="{{ site.baseurl }}{{ entry.url }}">{{ entry.title }}</a>
          {% include navigation.html context=entry.url %}
        </li>
      {% endif %}
    {% endfor %}
</ul>
{% endcapture %}{{ html | strip_newlines | replace:'    ','' | replace:'    ','' | replace:'  ',' ' }}